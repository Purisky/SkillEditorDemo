# 开发指南

## 核心开发原则
- **🚫 严禁自动添加测试/性能检测代码**：除非用户明确要求，否则禁止在任何工作流程中添加测试代码、性能检测代码或相关任务
- **专注核心功能**：只实现用户明确要求的功能，避免额外的代码膨胀
- **最小化改动**：使用最少的代码改动来实现需求
- **⚠️ 🚫 禁止过度优化**：严禁为追求微小性能提升而引入过度复杂的设计

## 🛡️ 反过度工程化原则

**⚠️ 核心警告：避免为了微小性能提升而牺牲代码可维护性**

- **KISS原则优先**：保持简单愚蠢 - 最高优先级
- **YAGNI原则**：你不会需要它 - 避免实现"可能需要"的功能
- **🚫 禁止过度复杂化**：复杂统计系统、重复接口、过度细化配置
- **📊 复杂度警戒线**：单个类>300行、接口方法>5个、配置参数>5个
- **简化时机**：代码审查困难、修改涉及多个组件时优先简化

## C# 规范
- 使用 C# 9.0+ 语法
- 遵循 Microsoft 命名约定
- **强制要求：所有if/else语句必须使用大括号{}**

## TypeCacheSystem与代码生成一致性
**⚠️ 重要：任何对反射信息/TypeCacheSystem的修改，都应该同步考虑Generator~.PrecompiledTypeInfo中代码生成的修改，以保持一致性**

- **必读指南**：详见 `Assets\TreeNode\开发指南-TypeCacheSystem与代码生成一致性.md`
- **核心原则**：运行时反射与编译时代码生成必须保持双向同步
- **修改流程**：
  1. 分析影响范围（TypeReflectionInfo结构、UnifiedMemberInfo生成、Attribute提取等）
  2. 同步修改运行时TypeCacheSystem和编译时PrecompiledTypeInfo代码生成
  3. 确保预编译版本性能优势

**重要原则**：不要为了消除Obsolete警告而强制修改稳定的现有代码，保持"简单优先"原则
- **🚫 严禁添加测试/性能代码**：除非用户明确要求，否则禁止在任何阶段添加测试代码、性能检测代码或相关任务
- **必须先创建计划文件**，路径应接近相关模块
- **强制要求：计划文件必须以.Plan.md结尾**
- **必须：分解为最小任务单元，使用伪代码描述**
- **禁止：在计划文档中编写具体代码**，仅使用伪代码说明功能目的
- **流程：等待审核后逐步执行，计划阶段禁止修改任何代码**
- **原则：使用最少改动，专注核心功能，保持代码简洁**
- **🚫 重申：任何工作流程计划都不得自动包含测试相关任务**，测试代码仅在明确要求时才编写
- **⚠️ 预防过度优化**：复杂需求容易诱发过度设计，发现复杂化时立即简化

### 测试/性能探查规范

**⚠️ 重要提醒：以下规范仅在用户明确要求测试功能时使用，严禁在任何常规开发流程中自动添加**

- **路径要求：所有测试脚本必须放置于 `Assets\Editor\Test\[测试内容]` 路径下**
- **函数要求：必须是public static方法，无参数，返回string类型结果**

#### MCP工具集使用
**仅在明确要求测试时使用的标准测试流程：**
1. **重新编译** - 使用`mcp_mcp4unity_recompileassemblies`强制重新编译
2. **调用测试** - 使用`mcp_mcp4unity_runcode [命名空间(如果有)].[类名].[方法名]`执行测试
3. **问题诊断** - 调用失败时使用`mcp_mcp4unity_checkassemblystatus`诊断

使用中文作最终总结